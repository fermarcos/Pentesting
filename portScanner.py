#!/usr/bin/python
#Parra Arroyo Fernando Marcos
#15-03-17
#
#Este programa recibe como parametro una ip, puerto inicial y puerto final
#y muestra como salida en pantalla los puertos  abiertos dentro del rango
#establecido con el puerto inicial y puerto final
#
#Ejemplo de uso:
#	python portScanner.py 192.168.95.11 1 1000
#

import socket
import sys

#verificacion de parametros
if len(sys.argv) != 4:
	sys.exit("Uso: python portScanner.py ip puerto_inicial puerto_final")
#verificacion de la ip
try:
	socket.inet_aton(sys.argv[1])
except:
	sys.exit("IP no valida")
#verificacion de los numeros de puerto
if(int(sys.argv[2])<0 or int(sys.argv[3])>65535):
	sys.exit("Error en numero de puerto, valores validos (0-65535)")
else:
	for puerto in range(int(sys.argv[2]),int(sys.argv[3])):
		try:
			fd_socket = socket.socket()
			fd_socket.connect((sys.argv[1],puerto))
			print "Port "+str(puerto)+" OPEN"
			socket.close()
		except :
			pass